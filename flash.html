<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–ü—Ä–æ—à–∏–≤–∫–∞ ESP32 ‚Äî Power Monitor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/flash.css?v=2">
    <script type="module" src="https://unpkg.com/esp-web-tools@10/dist/web/install-button.js"></script>
</head>
<body>
    <div class="circuit-bg"></div>
    <div class="glow-orb"></div>
    <div class="scanlines"></div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <a href="/" class="logo">
                <div class="logo-icon">‚ö°</div>
                <span class="logo-text">Power Monitor</span>
            </a>
            <h1 class="page-title">–ü—Ä–æ—à–∏–≤–∫–∞ ESP32</h1>
            <p class="page-subtitle">–í—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–æ—à–∏–≤–∫—É —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–π –ø—Ä–∏—Å—Ç—Ä—ñ–π</p>
        </div>

        <!-- Browser Warning -->
        <div class="browser-warning" id="browserWarning">
            ‚ö†Ô∏è –¶–µ–π –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î Web Serial. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π <strong>Chrome</strong> –∞–±–æ <strong>Edge</strong> –Ω–∞ –∫–æ–º–ø'—é—Ç–µ—Ä—ñ.
        </div>

        <!-- Wizard Step Indicator -->
        <div class="wizard-steps">
            <div class="wizard-step active">
                <div class="wizard-step-num">1</div>
                <div class="wizard-step-label">–ù–∞–∑–≤–∞</div>
            </div>
            <div class="wizard-step-line"></div>
            <div class="wizard-step">
                <div class="wizard-step-num">2</div>
                <div class="wizard-step-label">–ü—Ä–æ—à–∏–≤–∫–∞</div>
            </div>
            <div class="wizard-step-line"></div>
            <div class="wizard-step">
                <div class="wizard-step-num">3</div>
                <div class="wizard-step-label">Telegram</div>
            </div>
        </div>

        <!-- Wizard Card -->
        <div class="wizard-card">

            <!-- ==================== STEP 1: Device Name ==================== -->
            <div class="wizard-panel active" id="panel1">
                <div class="panel-title">–ù–∞–∑–≤–∞ –ø—Ä–∏—Å—Ç—Ä–æ—é</div>
                <div class="panel-desc">
                    –í–≤–µ–¥–∏ –Ω–∞–∑–≤—É –¥–ª—è —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, ¬´–ö–≤–∞—Ä—Ç–∏—Ä–∞¬ª –∞–±–æ ¬´–î–∞—á–∞¬ª
                </div>
                <input type="text" class="form-input" id="deviceName" placeholder="–í–≤–µ–¥–∏ –Ω–∞–∑–≤—É –ø—Ä–∏—Å—Ç—Ä–æ—é" maxlength="40" autocomplete="off" spellcheck="false">
            </div>

            <!-- ==================== STEP 2: Flash ==================== -->
            <div class="wizard-panel" id="panel2">
                <div class="panel-title">–ü—Ä–æ—à–∏–≤–∫–∞ —Ç–∞ WiFi</div>
                <div class="panel-desc">
                    –ü—ñ–¥–∫–ª—é—á–∏ ESP32 –¥–æ USB —Ç–∞ –Ω–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É. –ü—ñ—Å–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ –∑'—è–≤–∏—Ç—å—Å—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è WiFi.
                </div>

                <div class="flash-section">
                    <esp-web-install-button id="espWebInstall" manifest="/manifest.json">
                        <button slot="activate" class="btn btn-primary" id="flashBtn">
                            <span>‚ö°</span>
                            <span>–ü—Ä–æ—à–∏—Ç–∏ ESP32</span>
                        </button>
                        <div slot="unsupported" class="browser-unsupported">
                            –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π Chrome –∞–±–æ Edge.
                        </div>
                        <div slot="not-allowed" class="browser-unsupported">
                            –ü–æ—Ç—Ä—ñ–±–µ–Ω HTTPS –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ USB.
                        </div>
                    </esp-web-install-button>

                    <div class="flash-hint">
                        <div class="hint-icon">üí°</div>
                        <div class="hint-text">
                            ESP Web Tools –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å —Ç–∏–ø –ø–ª–∞—Ç–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É—î WiFi –ø—ñ—Å–ª—è –ø—Ä–æ—à–∏–≤–∫–∏
                        </div>
                    </div>
                </div>

                <!-- Post-flash status -->
                <div class="post-flash-status" id="postFlashStatus">
                    <div class="status-icon">‚úì</div>
                    <div class="status-text">
                        <div class="status-title">–ü—Ä–æ—à–∏–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</div>
                        <div class="status-desc" id="deviceIdDisplay">–ü—Ä–∏—Å—Ç—Ä—ñ–π –≥–æ—Ç–æ–≤–∏–π –¥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</div>
                    </div>
                </div>
            </div>

            <!-- ==================== STEP 3: Telegram ==================== -->
            <div class="wizard-panel" id="panel3">
                <div class="panel-title">Telegram —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</div>
                <div class="panel-desc">
                    –ü—ñ–¥–∫–ª—é—á–∏ —Å–≤–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ —Å–≤—ñ—Ç–ª–æ
                </div>

                <div class="tg-section">
                    <!-- Telegram sub-steps indicator -->
                    <div class="tg-substeps">
                        <div class="tg-substep active">
                            <div class="tg-substep-num">1</div>
                            <div class="tg-substep-label">–¢–æ–∫–µ–Ω</div>
                        </div>
                        <div class="tg-substep-line"></div>
                        <div class="tg-substep">
                            <div class="tg-substep-num">2</div>
                            <div class="tg-substep-label">–ß–∞—Ç</div>
                        </div>
                        <div class="tg-substep-line"></div>
                        <div class="tg-substep">
                            <div class="tg-substep-num">3</div>
                            <div class="tg-substep-label">–ì–æ—Ç–æ–≤–æ</div>
                        </div>
                    </div>

                    <!-- Telegram Step 1: Bot Token -->
                    <div class="tg-panel active" id="tgPanel1">
                        <div class="tg-instruction">
                            <div class="tg-instruction-num">1</div>
                            <div class="tg-instruction-text">
                                –í—ñ–¥–∫—Ä–∏–π <a href="https://t.me/BotFather" target="_blank" class="tg-link">@BotFather</a> –≤ Telegram
                            </div>
                        </div>
                        <div class="tg-instruction">
                            <div class="tg-instruction-num">2</div>
                            <div class="tg-instruction-text">
                                –í—ñ–¥–ø—Ä–∞–≤ –∫–æ–º–∞–Ω–¥—É <code>/newbot</code> —Ç–∞ —Å–ª—ñ–¥—É–π —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º
                            </div>
                        </div>
                        <div class="tg-instruction">
                            <div class="tg-instruction-num">3</div>
                            <div class="tg-instruction-text">
                                –°–∫–æ–ø—ñ—é–π —Ç–æ–∫–µ–Ω —Ç–∞ –≤—Å—Ç–∞–≤ —Å—é–¥–∏:
                            </div>
                        </div>
                        <input type="text" id="tgBotToken" placeholder="123456789:ABCdef..." class="tg-input">
                        <button id="tgVerifyToken" class="btn btn-telegram">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–æ–∫–µ–Ω</button>
                        <div id="tgTokenStatus" class="tg-status"></div>
                    </div>

                    <!-- Telegram Step 2: Find Chats -->
                    <div class="tg-panel" id="tgPanel2">
                        <div class="tg-bot-info">
                            <div class="tg-bot-avatar">ü§ñ</div>
                            <div class="tg-bot-details">
                                <div class="tg-bot-name" id="tgBotName">Bot Name</div>
                                <div class="tg-bot-username" id="tgBotUsername">@username</div>
                            </div>
                            <div class="tg-bot-check">‚úì</div>
                        </div>

                        <div class="tg-instruction">
                            <div class="tg-instruction-num">1</div>
                            <div class="tg-instruction-text">
                                –î–æ–¥–∞–π –±–æ—Ç–∞ –≤ –≥—Ä—É–ø—É –∞–±–æ –∫–∞–Ω–∞–ª, –∫—É–¥–∏ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
                            </div>
                        </div>
                        <div class="tg-instruction">
                            <div class="tg-instruction-num">2</div>
                            <div class="tg-instruction-text">
                                –ù–∞–ø–∏—à–∏ –±—É–¥—å-—è–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —Ü–µ–π —á–∞—Ç
                            </div>
                        </div>

                        <button id="tgFindChats" class="btn btn-telegram">
                            <span>üîç</span>
                            –ó–Ω–∞–π—Ç–∏ —á–∞—Ç–∏
                        </button>

                        <div id="tgChatList" class="tg-chat-list" style="display:none;">
                            <div class="tg-chat-empty">–®—É–∫–∞—î–º–æ —á–∞—Ç–∏...</div>
                        </div>

                        <div id="tgStep2Status" class="tg-status"></div>
                    </div>

                    <!-- Telegram Step 3: Done -->
                    <div class="tg-panel" id="tgPanel3">
                        <div class="tg-success-icon">üéâ</div>
                        <div class="tg-success-title">Telegram –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ!</div>
                        <div class="tg-success-desc">
                            –¢–µ–ø–µ—Ä —Ç–∏ –±—É–¥–µ—à –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –≤–∫–ª—é—á–µ–Ω–Ω—è —Ç–∞ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞
                        </div>
                        <div class="tg-selected-chat">
                            <div class="tg-chat-icon">üí¨</div>
                            <div class="tg-chat-info">
                                <div class="tg-chat-name" id="tgSelectedChatName">Chat Name</div>
                                <div class="tg-chat-id" id="tgSelectedChatId">ID: -100...</div>
                            </div>
                        </div>
                        <button id="tgSendTest" class="btn btn-secondary">
                            <span>üì§</span>
                            –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
                        </button>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="wizard-nav">
                <button class="btn-nav" id="btnBack" style="visibility: hidden;">
                    <span>‚Üê</span> –ù–∞–∑–∞–¥
                </button>
                <button class="btn-nav btn-nav-primary" id="btnNext" disabled>
                    –î–∞–ª—ñ <span>‚Üí</span>
                </button>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <a href="/" class="footer-link">
                <span>‚Üê</span>
                <span>–ù–∞ –≥–æ–ª–æ–≤–Ω—É</span>
            </a>
        </div>
    </div>

    <script type="module" src="/flash.js?v=3"></script>
</body>
</html>
