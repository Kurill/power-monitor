<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–ü—Ä–æ—à–∏–≤–∫–∞ ESP32 ‚Äî Power Monitor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/flash.css?v=1">
</head>
<body>
    <div class="circuit-bg"></div>
    <div class="glow-orb"></div>
    <div class="scanlines"></div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <a href="/" class="logo">
                <div class="logo-icon">‚ö°</div>
                <span class="logo-text">Power Monitor</span>
            </a>
            <h1 class="page-title">–ü—Ä–æ—à–∏–≤–∫–∞ ESP32</h1>
            <p class="page-subtitle">–í—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–æ—à–∏–≤–∫—É —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–π –ø—Ä–∏—Å—Ç—Ä—ñ–π</p>
        </div>

        <!-- Browser Warning -->
        <div class="browser-warning" id="browserWarning">
            ‚ö†Ô∏è –¶–µ–π –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î Web Serial. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π <strong>Chrome</strong> –∞–±–æ <strong>Edge</strong> –Ω–∞ –∫–æ–º–ø'—é—Ç–µ—Ä—ñ.
        </div>

        <!-- Wizard Step Indicator -->
        <div class="wizard-steps">
            <div class="wizard-step active">
                <div class="wizard-step-num">1</div>
                <div class="wizard-step-label">–ù–∞–∑–≤–∞</div>
            </div>
            <div class="wizard-step-line"></div>
            <div class="wizard-step">
                <div class="wizard-step-num">2</div>
                <div class="wizard-step-label">–ü—Ä–æ—à–∏–≤–∫–∞</div>
            </div>
            <div class="wizard-step-line"></div>
            <div class="wizard-step">
                <div class="wizard-step-num">3</div>
                <div class="wizard-step-label">WiFi</div>
            </div>
            <div class="wizard-step-line"></div>
            <div class="wizard-step">
                <div class="wizard-step-num">4</div>
                <div class="wizard-step-label">Telegram</div>
            </div>
        </div>

        <!-- Wizard Card -->
        <div class="wizard-card">

            <!-- ==================== STEP 1: Device Name ==================== -->
            <div class="wizard-panel active" id="panel1">
                <div class="panel-title">–ù–∞–∑–≤–∞ –ø—Ä–∏—Å—Ç—Ä–æ—é</div>
                <div class="panel-desc">
                    –í–≤–µ–¥–∏ –Ω–∞–∑–≤—É –¥–ª—è —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, ¬´–ö–≤–∞—Ä—Ç–∏—Ä–∞¬ª –∞–±–æ ¬´–î–∞—á–∞¬ª
                </div>
                <input type="text" class="form-input" id="deviceName" placeholder="–í–≤–µ–¥–∏ –Ω–∞–∑–≤—É –ø—Ä–∏—Å—Ç—Ä–æ—é" maxlength="40" autocomplete="off" spellcheck="false">
            </div>

            <!-- ==================== STEP 2: Flash ==================== -->
            <div class="wizard-panel" id="panel2">
                <div class="panel-title">–ü—Ä–æ—à–∏–≤–∫–∞ ESP32</div>
                <div class="panel-desc">
                    –ü—ñ–¥–∫–ª—é—á–∏ ESP32 –¥–æ USB —Ç–∞ –Ω–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É –ø—Ä–æ—à–∏–≤–∫–∏
                </div>

                <button class="btn btn-primary" id="flashBtn">
                    <span>‚ö°</span>
                    <span id="flashBtnText">–ü—Ä–æ—à–∏—Ç–∏ ESP32</span>
                </button>

                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞...</div>
                </div>

                <div class="flash-log" id="flashLog"></div>

                <!-- Post-flash actions -->
                <div class="post-flash-actions" id="postFlashActions">
                    <button class="btn btn-success" id="btnGoToDashboard">
                        <span>üì±</span>
                        –ü–µ—Ä–µ–π—Ç–∏ –¥–æ –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤
                    </button>
                    <button class="btn btn-secondary" id="btnConfigureWifi">
                        <span>üì∂</span>
                        –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ WiFi
                    </button>
                </div>
            </div>

            <!-- ==================== STEP 3: WiFi ==================== -->
            <div class="wizard-panel" id="panel3">
                <div class="panel-title">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è WiFi</div>
                <div class="panel-desc">
                    –û–±–µ—Ä–∏ –º–µ—Ä–µ–∂—É –∑—ñ —Å–ø–∏—Å–∫—É –∞–±–æ –≤–≤–µ–¥–∏ –¥–∞–Ω—ñ –≤—Ä—É—á–Ω—É
                </div>

                <div class="wifi-section">
                    <div id="wifiNetworkList" class="wifi-network-list">
                        <div class="wifi-network-empty">–ù–∞—Ç–∏—Å–Ω–∏ "–î–∞–ª—ñ" –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É –∫—Ä–æ—Ü—ñ</div>
                    </div>

                    <input type="text" id="wifiSsid" placeholder="–ê–±–æ –≤–≤–µ–¥–∏ SSID –≤—Ä—É—á–Ω—É" class="wifi-input">
                    <input type="password" id="wifiPass" placeholder="–ü–∞—Ä–æ–ª—å" class="wifi-input">

                    <div class="wifi-buttons">
                        <button id="wifiSave" class="btn btn-secondary">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                        <button id="wifiTest" class="btn btn-success">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
                    </div>

                    <div id="wifiLog" class="wifi-log"></div>
                    <div id="wifiStatusInline" class="wifi-status-inline"></div>
                </div>
            </div>

            <!-- ==================== STEP 4: Telegram ==================== -->
            <div class="wizard-panel" id="panel4">
                <div class="panel-title">Telegram —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</div>
                <div class="panel-desc">
                    –ü—ñ–¥–∫–ª—é—á–∏ —Å–≤–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ —Å–≤—ñ—Ç–ª–æ
                </div>

                <div class="tg-section">
                    <!-- Telegram sub-steps indicator -->
                    <div class="tg-substeps">
                        <div class="tg-substep active">
                            <div class="tg-substep-num">1</div>
                            <div class="tg-substep-label">–¢–æ–∫–µ–Ω</div>
                        </div>
                        <div class="tg-substep-line"></div>
                        <div class="tg-substep">
                            <div class="tg-substep-num">2</div>
                            <div class="tg-substep-label">–ß–∞—Ç</div>
                        </div>
                        <div class="tg-substep-line"></div>
                        <div class="tg-substep">
                            <div class="tg-substep-num">3</div>
                            <div class="tg-substep-label">–ì–æ—Ç–æ–≤–æ</div>
                        </div>
                    </div>

                    <!-- Telegram Step 1: Bot Token -->
                    <div class="tg-panel active" id="tgPanel1">
                        <div class="tg-instruction">
                            <div class="tg-instruction-num">1</div>
                            <div class="tg-instruction-text">
                                –í—ñ–¥–∫—Ä–∏–π <a href="https://t.me/BotFather" target="_blank" class="tg-link">@BotFather</a> –≤ Telegram
                            </div>
                        </div>
                        <div class="tg-instruction">
                            <div class="tg-instruction-num">2</div>
                            <div class="tg-instruction-text">
                                –í—ñ–¥–ø—Ä–∞–≤ –∫–æ–º–∞–Ω–¥—É <code>/newbot</code> —Ç–∞ —Å–ª—ñ–¥—É–π —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º
                            </div>
                        </div>
                        <div class="tg-instruction">
                            <div class="tg-instruction-num">3</div>
                            <div class="tg-instruction-text">
                                –°–∫–æ–ø—ñ—é–π —Ç–æ–∫–µ–Ω —Ç–∞ –≤—Å—Ç–∞–≤ —Å—é–¥–∏:
                            </div>
                        </div>
                        <input type="text" id="tgBotToken" placeholder="123456789:ABCdef..." class="tg-input">
                        <button id="tgVerifyToken" class="btn btn-telegram">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–æ–∫–µ–Ω</button>
                        <div id="tgTokenStatus" class="tg-status"></div>
                    </div>

                    <!-- Telegram Step 2: Find Chats -->
                    <div class="tg-panel" id="tgPanel2">
                        <div class="tg-bot-info">
                            <div class="tg-bot-avatar">ü§ñ</div>
                            <div class="tg-bot-details">
                                <div class="tg-bot-name" id="tgBotName">Bot Name</div>
                                <div class="tg-bot-username" id="tgBotUsername">@username</div>
                            </div>
                            <div class="tg-bot-check">‚úì</div>
                        </div>

                        <div class="tg-instruction">
                            <div class="tg-instruction-num">1</div>
                            <div class="tg-instruction-text">
                                –î–æ–¥–∞–π –±–æ—Ç–∞ –≤ –≥—Ä—É–ø—É –∞–±–æ –∫–∞–Ω–∞–ª, –∫—É–¥–∏ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
                            </div>
                        </div>
                        <div class="tg-instruction">
                            <div class="tg-instruction-num">2</div>
                            <div class="tg-instruction-text">
                                –ù–∞–ø–∏—à–∏ –±—É–¥—å-—è–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —Ü–µ–π —á–∞—Ç
                            </div>
                        </div>

                        <button id="tgFindChats" class="btn btn-telegram">
                            <span>üîç</span>
                            –ó–Ω–∞–π—Ç–∏ —á–∞—Ç–∏
                        </button>

                        <div id="tgChatList" class="tg-chat-list" style="display:none;">
                            <div class="tg-chat-empty">–®—É–∫–∞—î–º–æ —á–∞—Ç–∏...</div>
                        </div>

                        <div id="tgStep2Status" class="tg-status"></div>
                    </div>

                    <!-- Telegram Step 3: Done -->
                    <div class="tg-panel" id="tgPanel3">
                        <div class="tg-success-icon">üéâ</div>
                        <div class="tg-success-title">Telegram –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ!</div>
                        <div class="tg-success-desc">
                            –¢–µ–ø–µ—Ä —Ç–∏ –±—É–¥–µ—à –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –≤–∫–ª—é—á–µ–Ω–Ω—è —Ç–∞ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞
                        </div>
                        <div class="tg-selected-chat">
                            <div class="tg-chat-icon">üí¨</div>
                            <div class="tg-chat-info">
                                <div class="tg-chat-name" id="tgSelectedChatName">Chat Name</div>
                                <div class="tg-chat-id" id="tgSelectedChatId">ID: -100...</div>
                            </div>
                        </div>
                        <button id="tgSendTest" class="btn btn-secondary">
                            <span>üì§</span>
                            –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
                        </button>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="wizard-nav">
                <button class="btn-nav" id="btnBack" style="visibility: hidden;">
                    <span>‚Üê</span> –ù–∞–∑–∞–¥
                </button>
                <button class="btn-nav btn-nav-primary" id="btnNext" disabled>
                    –î–∞–ª—ñ <span>‚Üí</span>
                </button>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <a href="/dashboard" class="footer-link">
                <span>‚Üê</span>
                <span>–ú–æ—ó –ø—Ä–∏—Å—Ç—Ä–æ—ó</span>
            </a>
        </div>
    </div>

    <script type="module" src="/flash.js?v=2"></script>
</body>
</html>
